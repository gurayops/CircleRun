#:import toRGB kivy.utils.get_color_from_hex

<UserCursor@Widget>:
	id: cursorRoot
	startLocation: 0
	direction: 0
	canvas.after:
		Color:
			rgb: 0, 0, 0
		Line:
			width: 5
			circle: (self.center_x, self.center_y, cursorRoot.width*0.5, self.startLocation, self.startLocation+7)


<ImageButton@ButtonBehavior+Image>
    source: 'images/buttons/play/play_comfortaa_text.png'
    #size_hint: .5, .5

<MenuButton@ButtonBehavior+Label>
	bgcolor: (0, 0, 0, 1)
	canvas.before:
		Color:
			rgba: self.bgcolor
		Rectangle:
			size: self.size
			pos: self.pos
	on_press: self.bgcolor[3] = 0.5
	on_release: self.bgcolor[3] = 1
	font_size: "50sp"
	# font_name: 'Comfortaa'


<CircleObjects>:
	width: self.height


<PlayGround>:
	id: playGround
	circleCenter: self.center
	radius: self.height / 2

	canvas.before:
		Color:
			rgba: (0, 0, 0, 1)
		Line:
			dash_offset: 5
			dash_length: 5
			circle: (self.center_x, self.center_y, self.radius)
		# Color:
		# 	rgba: (0, 0, 0, .3)
		# Rectangle:
		# 	pos: self.pos
		# 	size: self.size

	Image:
		id: centerImage
		source: "images/center.png"
		size_hint: (.2, .2)
		pos_hint: {'center_x': .5, 'center_y': .5}

<Game>:
	id: gameWindow
	score: 0
	# canvas.after:
	# 	Color:
	# 		rgba: (0, 1, 0, .3)
	# 	Rectangle:
	# 		pos: self.pos
	# 		size: self.size

	Image:
		id: background
		source: "images/background.png"
		allow_stretch: True
		keep_ratio: False
		pos: 0, 0
		size: root.size

	Image:
		id: scoreBackground
		source: "images/scoreBackground.png"
		size_hint: (.3, .3)
		pos_hint: {'y': .05}
		Label:
			id: scoreDisplay
			text: str(root.score)
			center: scoreBackground.center
			font_size: "60sp"
			bold: True
			on_text: print scoreBackground.pos

	# TODO: SHOW THE LEVEL
	
	#BoxLayout:
	#	size_hint: (.2, .2)
	#	pos_hint: {'y': .50}
	#	orientation: 'vertical'
	#	Label:
	#		id: levelText
	#		text: 'Level'
	#		font_size: '20sp'
	#	Label:
	#		id: level
	#		text: '1'
	#		font_size: '30sp'


	ImageButton:
		id: directionButton
		source: "images/buttons/direction/directionButton.png"
		size_hint: (.3, .3)
		#center: (root.width*0.7, root.height*0.2)
		pos_hint: {'center_x': .85, 'center_y': 0.2}
		on_press: root.startTurn(self)
		on_release: root.stopTurn(self)

	PlayGround:
		id: pg
		size_hint: (.6, .9)
		pos_hint: {'center_x': .5, 'center_y': .5}

		
<Enemy>:
	canvas:
		Color:
			rgba: 1, 1, 1, .3
		Rectangle:
			size: self.size
			pos: self.pos

	
<UserObject>:
	canvas:
		Color:
			rgba: 1, 1, 1, .3
		Rectangle:
			size: self.size
			pos: self.pos


# Will be in screen end of the game or
# when level changes
<ResultScreen>:
	gameStatus: 'Game Over :('
	orientation: 'vertical'
	lastScore: 0

	Label:
		text: root.gameStatus
		font_size: '40sp'

	Label:
		id: totalScore
		text: "Score: %d" %root.lastScore
		font_size: '55sp'
		bold: True

	BoxLayout:
		Button:
			text: 'Main Menu'
			on_release: root.goMainMenu()
		Button:
			text: 'Restart'
			on_release: root.newGame()


<Menu>:
	orientation: 'vertical'
	GridLayout:
		pos_hint: {'x': 0, 'y': 0}
		size_hint: (1, 1)
		rows: 2
		cols: 2
		MenuButton:
			text: 'Start'
			
			bgcolor: toRGB("dcb61dff")
			on_release: root.on_start()
		MenuButton:
			text: 'High Scores'
			bgcolor: toRGB("6b91ffff")
			on_release: root.high_scores()
		MenuButton:
			text: 'Store'
			bgcolor: toRGB("8d0096ff")
			on_release: root.high_scores()
		MenuButton:
			text: 'Share'
			bgcolor: toRGB("509b00ff")
			#on_press: root.high_scores()
	ImageButton:
		id: playButton
		size_hint_y: .6
		pos_hint: {'center_x': .5, 'center_y': .5}
		source: "images/buttons/play/play_comfortaa_text_noglow.png"
		allow_stretch: True
		on_press: root.playButtonAnimStart()
		on_release: root.on_start()
		



<HighScores>:
	orientation: 'vertical'
	Label:
		text: 'High Scores'
	Label:
		text: 'No Data'
	Button:
		text: 'Main Menu'
		on_press: root.main_menu()


